<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> <!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]--> <title>Alfred 自动补全的技巧</title> <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600|Droid+Sans+Mono' rel='stylesheet' type='text/css'> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="http://www.echoed.me/2015/10/17/alfred_tips/"> <link rel="alternate" type="application/rss+xml" title="Echo's Blog" href="http://www.echoed.me/feed.xml" /> <script src="/assets/js/prefixfree.js"></script> </head> <body> <aside id="sidebar"> <div id="sidebar-left"> <a id="sidebar-avatar" href="/"> <img id="sidebar-avatar-img" alt="" src="/assets/img/avatar.jpg"/> </a> <div id="sidebar-social"> <a href="/feed.xml" class="sidebar-social-icon feed"></a> <a href="mailto:echohn@gmail.com" class="sidebar-social-icon email"></a> <a href="https://twitter.com/echo_hon" class="sidebar-social-icon twitter" target="_blank"></a> <a href="http://www.weibo.com/1130234205" class="sidebar-social-icon weibo" target="_blank"></a> <a href="https://github.com/echohn" class="sidebar-social-icon github" target="_blank"></a> </div> <ul id="sidebar-tags"> <li class="sidebar-tag active" data-filter="all">全部文章</li> <li class="sidebar-tag" data-filter="杂记">杂记</li> <li class="sidebar-tag" data-filter="Mac">Mac</li> <li class="sidebar-tag" data-filter="Alfred">Alfred</li> <li class="sidebar-tag" data-filter="Ruby">Ruby</li> <li class="sidebar-tag" data-filter="Safari">Safari</li> <li class="sidebar-tag" data-filter="运维">运维</li> </ul> </div> <div id="sidebar-right"> <div id="search-box"> <input id="search-input" type="text" placeholder="Search" /> </div> <nav id="toc"> <a class="toc-link" data-tags="运维" href="/2016/02/03/server-os-choose-rhel-cenos-or-debian-ubuntu/"> 服务器操作系统应该选择 RHEL/CentOS 还是 Debian/Ubuntu ？ </a> <a class="toc-link" data-tags="Mac Safari" href="/mac/2015/12/06/analyse_my_safari_history/"> 分析自己的 Safari 历史记录 </a> <a class="toc-link" data-tags="Mac Ruby Alfred" href="/2015/10/17/rubygems-workflow/"> 搜索 rubygems 并安装的 Alfred Workflow </a> <a class="toc-link" data-tags="Ruby" href="/2015/10/17/ruby-destructuring/"> Ruby 强制解构 </a> <a class="toc-link" data-tags="Alfred Ruby Mac" href="/2015/10/17/alfred_tips/"> Alfred 自动补全的技巧 </a> <a class="toc-link" data-tags="Mac Alfred" href="/2015/04/19/search_ip_location_alfred/"> 查询 IP 地址位置的 Alfred Workflow </a> <a class="toc-link" data-tags="杂记" href="/2015/02/16/hello-world/"> 严重的拖延症患者 </a> </nav> </div> </aside> <main id="main"> <article class="post container"> <div class="post-meta"> <span class="post-meta-span date">2015 October 17</span> <span class="post-meta-span tag">Alfred, Ruby, Mac</span> </div> <h1 class="post-title">Alfred 自动补全的技巧</h1> <p>在写这个 <a href="/2015/10/17/rubygems-workflow/">RubyGems Workflow</a> 这个 Workflow 的时候，我发现了 Alfred 一点很有用的地方，就是对查询的结果进行自动补全，在补全后对查询结果进行另外的操作。</p> <p>当 Feedback 的 valid = no 时，就可以通过 autocomplete 属性自动补全 Feedback 。</p> <div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{</span>
  <span class="ss">:uid</span>      <span class="o">=&gt;</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;name&#39;</span><span class="o">]</span><span class="p">,</span>
  <span class="ss">:title</span>    <span class="o">=&gt;</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;name&#39;</span><span class="o">]</span><span class="p">,</span>
  <span class="ss">:subtitle</span> <span class="o">=&gt;</span> <span class="s2">&quot;Downloads: </span><span class="si">#{</span><span class="n">result</span><span class="o">[</span><span class="s1">&#39;downloads&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2"> ; Info: </span><span class="si">#{</span><span class="n">result</span><span class="o">[</span><span class="s1">&#39;info&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
  <span class="ss">:arg</span>      <span class="o">=&gt;</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;name&#39;</span><span class="o">]</span><span class="p">,</span>
  <span class="ss">:autocomplete</span> <span class="o">=&gt;</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;name&#39;</span><span class="o">]</span> <span class="o">+</span> <span class="s1">&#39; : &#39;</span><span class="p">,</span>
  <span class="ss">:valid</span>    <span class="o">=&gt;</span> <span class="s1">&#39;no&#39;</span>
<span class="p">}</span></code></pre></div> <p>而 autocomplete 的值就是第二次查询的 query，所以需要在脚本开始接收 query 的地方对结果进行解析，映射到不同的方法上。</p> <div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">if</span> <span class="n">query</span><span class="o">.</span><span class="n">match</span> <span class="s1">&#39;:&#39;</span>
  <span class="n">info</span> <span class="n">query</span><span class="o">.</span><span class="n">split</span><span class="o">.</span><span class="n">first</span>
<span class="k">else</span>
  <span class="n">search</span> <span class="n">query</span>
<span class="k">end</span></code></pre></div> <p>在补全之后的方法中，记得将 Feedback valid 属性的值设为 <code>yes</code>。</p> </article> <div class="post-share"> <div class="container"> <a href="https://twitter.com/share?url=http://www.echoed.me/2015/10/17/alfred_tips/&text=Alfred 自动补全的技巧" target="_blank" class="post-share-icon twitter"></a> <a href="https://www.evernote.com/clip.action?url=http://www.echoed.me/2015/10/17/alfred_tips/&title=Alfred 自动补全的技巧" target="_blank" class="post-share-icon evernote"></a> <a href="http://service.weibo.com/share/share.php?url=http://www.echoed.me/2015/10/17/alfred_tips/&title=Alfred 自动补全的技巧" target="_blank" class="post-share-icon weibo"></a> </div> </div> <div class="comment container"> <div id="disqus_thread"> <a href=""></a> </div> </div> <div class="footer"> <div class="container"> <p class="footer-entry">All content is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA</a></p> <p class="footer-entry">Buit with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll theme</a> • Hosted on <a href="https://pages.github.com/" target="_blank">Github</a></p> </div> </div> </main> <button id="menu"> <span id="menu-icons"></span> </button> <script src="/assets/js/jquery-2.1.3.min.js"></script> <script src="/assets/js/jquery.pjax.js"></script> <script src="/assets/js/nprogress.js"></script> <script src="/assets/js/main.js"></script> </body> </html>
